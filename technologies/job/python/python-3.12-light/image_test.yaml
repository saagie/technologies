schemaVersion: "2.0.0"

metadataTest:
  env:
    - key: LANG
      value: "en_US.UTF-8"
    - key: LC_ALL
      value: "en_US.UTF-8"

fileExistenceTests:
  - name: "unzip"
    path: "/usr/bin/unzip"
    shouldExist: true
    permissions: "-rwxr-xr-x"

  - name: "entrypoint"
    path: "/entrypoint"
    shouldExist: true
    permissions: "-rwxr-xr-x"

fileContentTests:
  - name: "entrypoint"
    path: "/entrypoint"
    expectedContents:
      [
        "unzip -q \\*.zip",
        "sh ./main_script",
      ]

commandTests:
  - name: "unzip"
    args: ["--help"]
    command: "unzip"
    exitCode: 0

  - name: "python installation"
    command: "which"
    args: ["python"]
    expectedOutput: ["/usr/local/bin/python"]

  - name: "python version"
    command: "python"
    args: ["-V"]
    expectedOutput: ["Python 3.12*"]

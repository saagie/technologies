version: v1
id: azure-databricks
label: Azure Databricks
description: ""
available: false
type: EXTERNAL_JOB
icon: job

contexts:
  - id: create-notebook-job
    label: Create Notebook job
    description: ""
    recommended: false
    trustLevel: experimental
    available: true
    connectionTypeId: azure
    parameters:
      - type: DYNAMIC_SELECT
        id: resourceGroup
        label: Resource Group
        mandatory: true
        dynamicValues:
          script: .//../../scripts/azure/dist/job-form.js
          function: getResourceGroups
      - type: DYNAMIC_SELECT
        id: workspace
        label: Workspace
        mandatory: true
        dynamicValues:
          script: .//../../scripts/azure/dist/job-form.js
          function: getWorkspaces
        dependsOn:
          - resourceGroup
      - type: DYNAMIC_SELECT
        id: notebook
        label: Notebook
        mandatory: true
        dynamicValues:
          script: .//../../scripts/azure/dist/job-form.js
          function: getNotebooks
        dependsOn:
          - workspace
      - type: TEXT
        id: jobName
        label: Notebook job name
        mandatory: true
        dependsOn:
          - workspace
      - type: TEXT
        id: jobParameters
        label: Notebook job parameters
        mandatory: false
        dependsOn:
          - workspace
    actions:
      start:
        script: .//../../scripts/azure/dist/databricks-actions.js
        function: startNotebook
      stop:
        script: .//../../scripts/azure/dist/databricks-actions.js
        function: stop
      getStatus:
        script: .//../../scripts/azure/dist/databricks-actions.js
        function: getStatus
      getLogs:
        script: .//../../scripts/azure/dist/databricks-actions.js
        function: getLogs
  - id: create-spark-job
    label: Create Spark job
    description: ""
    recommended: false
    trustLevel: experimental
    available: true
    connectionTypeId: azure
    parameters:
      - type: DYNAMIC_SELECT
        id: resourceGroup
        label: Resource Group
        mandatory: true
        dynamicValues:
          script: .//../../scripts/azure/dist/job-form.js
          function: getResourceGroups
      - type: DYNAMIC_SELECT
        id: workspace
        label: Workspace
        mandatory: true
        dynamicValues:
          script: .//../../scripts/azure/dist/job-form.js
          function: getWorkspaces
        dependsOn:
          - resourceGroup
      - type: TEXT
        id: jobName
        label: Spark job name
        mandatory: true
      - type: TEXT
        id: jobParameters
        label: Spark job parameters
        mandatory: true
    actions:
      start:
        script: .//../../scripts/azure/dist/databricks-actions.js
        function: startSpark
      stop:
        script: .//../../scripts/azure/dist/databricks-actions.js
        function: stop
      getStatus:
        script: .//../../scripts/azure/dist/databricks-actions.js
        function: getStatus
      getLogs:
        script: .//../../scripts/azure/dist/databricks-actions.js
        function: getLogs
  - id: run-existing-job
    label: Run existing job
    description: ""
    recommended: false
    trustLevel: experimental
    available: true
    connectionTypeId: azure
    parameters:
      - type: DYNAMIC_SELECT
        id: resourceGroup
        label: Resource Group
        mandatory: true
        dynamicValues:
          script: .//../../scripts/azure/dist/job-form.js
          function: getResourceGroups
      - type: DYNAMIC_SELECT
        id: workspace
        label: Workspace
        mandatory: true
        dynamicValues:
          script: .//../../scripts/azure/dist/job-form.js
          function: getWorkspaces
        dependsOn:
          - resourceGroup
      - type: DYNAMIC_SELECT
        id: job
        label: Job
        mandatory: true
        dynamicValues:
          script: .//../../scripts/azure/dist/job-form.js
          function: getJobs
        dependsOn:
          - workspace
    actions:
      start:
        script: .//../../scripts/azure/dist/databricks-actions.js
        function: startExisting
      stop:
        script: .//../../scripts/azure/dist/databricks-actions.js
        function: stop
      getStatus:
        script: .//../../scripts/azure/dist/databricks-actions.js
        function: getStatus
      getLogs:
        script: .//../../scripts/azure/dist/databricks-actions.js
        function: getLogs